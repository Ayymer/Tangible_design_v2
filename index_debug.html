<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tangible Design v2 - DEBUG MODE</title>
  
  <!-- p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  
  <!-- p5.sound (microphone) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
  
  <!-- p5.speech (reconnaissance vocale) -->
  <script src="https://cdn.jsdelivr.net/gh/IDMNYU/p5.js-speech@0.0.3/lib/p5.speech.js"></script>
  
  <!-- IMPORTANT: Load in correct order -->
  <!-- 1. Configuration -->
  <script src="config.js"></script>
  
  <!-- 2. Classes -->
  <script src="Emotion.js"></script>
  <script src="LetterVisualizer.js"></script>
  <script src="BodyVisualizer.js"></script>
  <script src="InputManager_debug.js"></script> <!-- DEBUG VERSION -->
  
  <!-- 3. Main application -->
  <script src="sketch_final.js"></script>
  
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    
    /* Debug console overlay */
    #debug-console {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 300px;
      max-height: 400px;
      background: rgba(0, 0, 0, 0.9);
      color: #00ff00;
      font-family: monospace;
      font-size: 11px;
      padding: 10px;
      border: 2px solid #00ff00;
      border-radius: 5px;
      overflow-y: auto;
      z-index: 10000;
    }
    
    #debug-console h3 {
      margin: 0 0 10px 0;
      color: #ffff00;
      font-size: 14px;
    }
    
    #debug-console .error {
      color: #ff0000;
    }
    
    #debug-console .success {
      color: #00ff00;
    }
    
    #debug-console .warning {
      color: #ffaa00;
    }
  </style>
</head>
<body>
  <!-- Debug console overlay -->
  <div id="debug-console">
    <h3>ðŸ”§ DEBUG MODE</h3>
    <div id="debug-output">
      <p>Open browser console (F12) for detailed logs...</p>
      <p>Press button to test speech recognition.</p>
    </div>
  </div>
  
  <!-- Canvas will be created by p5.js -->
  
  <script>
    // Intercept console.log to show in overlay
    const debugOutput = document.getElementById('debug-output');
    const originalLog = console.log;
    const originalError = console.error;
    const originalWarn = console.warn;
    
    function addToDebugConsole(message, type = 'log') {
      const p = document.createElement('p');
      p.className = type;
      p.textContent = message;
      debugOutput.appendChild(p);
      
      // Keep only last 20 messages
      while (debugOutput.children.length > 20) {
        debugOutput.removeChild(debugOutput.firstChild);
      }
      
      // Auto-scroll to bottom
      debugOutput.scrollTop = debugOutput.scrollHeight;
    }
    
    console.log = function(...args) {
      originalLog.apply(console, args);
      addToDebugConsole(args.join(' '), 'log');
    };
    
    console.error = function(...args) {
      originalError.apply(console, args);
      addToDebugConsole('ERROR: ' + args.join(' '), 'error');
    };
    
    console.warn = function(...args) {
      originalWarn.apply(console, args);
      addToDebugConsole('WARN: ' + args.join(' '), 'warning');
    };
  </script>
</body>
</html>
